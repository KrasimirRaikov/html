<!DOCTYPE html>
<html>
<head>

    <link rel="stylesheet" href="calculator.css"/>


</head>

<body>

<div class="box">


    <div class="display">

        <input id="calcvalue" type="textField" readonly size="18" class="text">

    </div>

    <div class="keys">

        <p><input type="button" class="button black" name="C" value="C" onclick="clearAll()">
            <input type="button" class="button black" value="CE" onclick="clearSymbol()"></p>

        <p><input type="button" class="button black" value="7" onclick="appendDigit(this)">
            <input type="button" class="button black" value="8" onclick="appendDigit(this)">
            <input type="button" class="button black" value="9" onclick="appendDigit(this)">
            <input type="button" class="button pink" value="*" onclick="operation(this)"></p>

        <p><input type="button" class="button black" value="4" onclick="appendDigit(this)">
            <input type="button" class="button black" value="5" onclick="appendDigit(this)">
            <input type="button" class="button black" value="6" onclick="appendDigit(this)">
            <input type="button" class="button pink" value="-" onclick="operation(this)"></p>

        <p><input type="button" class="button black" value="1" onclick="appendDigit(this)">
            <input type="button" class="button black" value="2" onclick="appendDigit(this)">
            <input type="button" class="button black" value="3" onclick="appendDigit(this)">
            <input type="button" class="button pink" value="+" onclick="operation(this)"></p>

        <p><input type="button" class="button black" value="0" onclick="appendDigit(this)">
            <input type="button" class="button black" value="." onclick="appendDigit(this)">
            <input type="button" class="button orange" value="=" onclick="result()">
            <input type="button" class="button pink" value="/" onclick="operation(this)"></p>

    </div>

</div>

<script>

    var val = document.getElementById("calcvalue");
    var task = "";

    function result() {
        var result = eval(task);
        console.log(result + " " + task);
        if (val.value != "") {
            val.value = result;
        }
        else {
            val.value = "ERROR";
        }
    }

    function appendDigit(digit) {
        if (val.value == "") {
            valueOnFirstPosition(digit);
        } else {
            setValue(digit);
        }
    }

    function valueOnFirstPosition(digit) {
        if (digit.value == ".") {
            return;
        } else {
            val.value = digit.value;
        }
    }

    function setValue(digit) {
        var value = val.value;
        console.log(value+" "+value.search("."));

        if (digit.value == "." && value.search(".")) {
                return;
            }
            else {
                val.value += digit.value;
                console.log(val.value);
            }

    }


    function operation(digit) {
      /*  var regex = "[0-9]{1,10}+.[0-9]{0.5}$";
        if (val.value.search(".")) {
            if (!val.value.search(regex)) {
                val.value = "Incorrect value";
                return;
            }
        }*/
        task += val.value + digit.value;
        val.value = "";
        console.log(task);
    }


    function clearSymbol() {
        var lastIndex = val.value.length - 1;
        val.value = val.value.substring(0, lastIndex);

    }

    function clearAll() {
        val.value = "";
        task = "";

    }


</script>

</body>

</html>
