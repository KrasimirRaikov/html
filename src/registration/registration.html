<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="registration.css"/>

</head>
<body>
<form name="form">
    <fieldset>
        <legend style="color: midnightblue">Personal information:</legend>
       <p><div>
           <label for="firstName" class="dataUser">First Name:</label>

               <input id="firstName" class="textField" type="text" pattern="([A-Za-z]){1,15}$" name="firstName" placeholder="First name"/>
        <div id="firstNameMessage" class="message"><sup><i> Must be between 1 and 15 symbols.</i></sup></div></div>
           </div>

        </p>

       <p><div>
        <label for="lastName" class="dataUser">Last Name</label>


            <input id="lastName" class="textField" type="text" pattern="([a-zA-Z]){1,15}$" name="lastName" placeholder="Last name"/>
        <div id="lastNameMessage" class="message"><sup><i> Must be between 1 and 15 symbols.</i></sup></div>
        </div>

            </p>
        <p><div>
          <label for="EGN" class="dataUser">EGN:</label>

            <input id="EGN" class="textField" type="text" pattern="[0-9]{10}$" name="EGN" placeholder="EGN"/>
        <div id="EGNMessage" class="message"><sup><i> Must be 10 symbols.</i></sup></div>
        </div>
        </p>
           <p>
           <div><label for="age" class="dataUser">Age:</label>
        <input id="age" name="age" type="number" min="18" max="118" placeholder="Age">
            </div>
           </p>
           <p><div>
        <label for="address" class="dataUser">Address:</label>

            <input id="address" class="textField" type="text" pattern="([a-zA-Z0-9.,:']){1,100}$"  name="address" placeholder="Address"/>
        <div id="addressMessage" class="message"><sup><i> Must be between 1 and 100 symbols.</i></sup></div>
        </div>
           </p>
           <p><div>
        <label for="password" class="dataUser">Password:</label>

            <input id="password" class="textField" type="password" pattern="([a-zA-Z0-9]){6,18}$" name="password" placeholder="Password"/>
        <div id="passwordMessage" class="message"><sup><i> Must be between 6 and 8 symbols.</i></sup></div>
        </div>
           </p>
           <p><div>
        <label for="confirmPassword" class="dataUser">Confirm password:</label>

            <input id="confirmPassword" class="textField" type="password" pattern="([a-zA-Z0-9]){6,18}$" name="confirmPassword" placeholder="Confirm password"/>
        <div id="confirmPasswordMessage" class="message"><sup><i> Must be between 6 and 8 symbols.</i></sup></div>
        </div>
           </p>
           <p>
           <input type="button" name="submit" value="Submit" onclick="validateForm()">
        <input type="reset" name="clear" value="Clear">
           </p>

       </div>
    </fieldset>
</form>

<script>

    var err=0;

    function validateForm() {
        err=0;
        var list = document.getElementsByClassName("textField");
        console.log(list.length);
        for (var i = 0; i < list.length; i++) {
            var element = list.item(i);
            if(element.value.length == 0) {
                alert("There are empty fields!");
                err++;
                return;
            } else {
                isValid(element);
            }
        }
        confirmPassword();
        showRegistrationMessage();
    }

    function isValid(element) {
        var pattern = element.getAttribute("pattern");
        console.log(typeof  pattern);
        var value = element.value;
        console.log(value+" "+pattern);
        var valid = value.search(pattern);
console.log(valid + " "+element);
        showMessage(valid, element);
    }

    function showMessage(valid, element) {
        var errorElement = document.getElementById(element.name+"Message");
        console.log(errorElement);
        if (valid == -1) {
            errorElement.setAttribute("style", "color: red;");
            err++;
        } else {
            errorElement.setAttribute("style", "color: green;");
        }
    }

    function confirmPassword() {
        var pass1 = document.getElementById("password");
        var pass2 = document.getElementById("confirmPassword");
        if (pass1.value != pass2.value) {
            var error = document.getElementById("confirmPasswordMessage");
            error.setAttribute("style", "color: red;");
            err++;
        }
    }

    function showRegistrationMessage() {
        console.log(err);
        if (err == 0) {
            alert("You have successfully signed!");
        }
    }

</script>
</body>
</html>